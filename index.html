<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Idle Tanks 3v3</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{margin:0;background:#0b132b;color:#fff;font-family:Arial}
#ui{display:flex}
#left{width:260px;padding:10px;background:#1c2541}
canvas{background:#87ceeb;flex:1}
button{width:100%;margin:4px 0;padding:8px;border-radius:8px;border:none;background:#3a86ff;color:#fff}
</style>
</head>

<body>
<div id="ui">
  <div id="left">
    <h3>üöú Idle Tanks</h3>
    <p>Coin: <span id="coin">0</span></p>
    <button onclick="spawn()">‚ñ∂Ô∏è Ch∆°i l·∫°i m√†n</button>
  </div>

  <canvas id="game" width="900" height="420"></canvas>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let coin = 0;
let player, enemy;
let bullets = [];

// ===== TANK =====
class Tank{
  constructor(x,y,color){
    this.x=x;this.y=y;
    this.hp=100;
    this.color=color;
  }
  draw(){
    // th√¢n
    ctx.fillStyle=this.color;
    ctx.fillRect(this.x,this.y,70,30);
    // th√°p
    ctx.fillStyle="#444";
    ctx.fillRect(this.x+20,this.y-12,30,12);
    // n√≤ng
    ctx.fillRect(this.x+50,this.y-8,28,6);
    // m√°u
    ctx.fillStyle="#0f0";
    ctx.fillRect(this.x,this.y-6,70*(this.hp/100),4);
  }
}

// ===== BULLET =====
class Bullet{
  constructor(x,y,v){
    this.x=x;this.y=y;this.v=v;
  }
  update(){this.x+=this.v}
  draw(){
    ctx.fillStyle="#ffd166";
    ctx.fillRect(this.x,this.y,6,3);
  }
}

// ===== SPAWN =====
function spawn(){
  player=new Tank(120,300,"#06d6a0");
  enemy=new Tank(700,300,"#ef476f");
  bullets=[];
}

// ===== SHOOT =====
setInterval(()=>{
  if(player && enemy){
    bullets.push(new Bullet(player.x+70,player.y+15,6));
    bullets.push(new Bullet(enemy.x,enemy.y+15,-5));
  }
},800);

// ===== LOOP =====
function loop(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // ƒë·∫•t
  ctx.fillStyle="#3b7a57";
  ctx.fillRect(0,330,900,90);

  if(player && enemy){
    player.draw();
    enemy.draw();
  }

  for(let i=bullets.length-1;i>=0;i--){
    const b=bullets[i];
    b.update();
    b.draw();

    // ƒë·∫°n tr√∫ng enemy
    if(enemy && b.v>0 && b.x>enemy.x){
      enemy.hp-=10;
      bullets.splice(i,1);
      if(enemy.hp<=0){coin+=50;spawn()}
    }
    // ƒë·∫°n tr√∫ng player
    if(player && b.v<0 && b.x<player.x+70){
      player.hp-=10;
      bullets.splice(i,1);
      if(player.hp<=0){spawn()}
    }
  }

  document.getElementById("coin").textContent=coin;
  requestAnimationFrame(loop);
}

spawn();
loop();
</script>
</body>
</html>
